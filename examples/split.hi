fn split text separator
    | let i = 0
    | let lines = []
    | let buf = ""
    | let ch = ""
    | let textlen = text len
    | loop 0 textlen
    | | ch = text at i
    | | if ch == separator
    | | | lines += buf
    | | | buf = ""
    | | if ch != separator
    | | | buf += ch
    | | i += 1
    | return = lines

exit